<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DFD Labeling Quiz – Expenditure & Revenue Cycles</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f7f9fc;
      color: #333;
      line-height: 1.6;
    }
    header {
      background-color: #2c3e50;
      color: white;
      padding: 20px;
      text-align: center;
    }
    h1 { margin: 0; }
    main { padding: 20px; max-width: 1000px; margin: 0 auto; }
    .home-button {
      display: inline-block;
      margin: 15px 0;
      padding: 10px 20px;
      background: #3498db;
      color: white;
      text-decoration: none;
      border-radius: 5px;
      font-size: 1em;
    }
    .home-button:hover { background: #2980b9; }
    #home-page { text-align: center; }
    .diagram-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }
    .diagram-card {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: transform 0.2s;
    }
    .diagram-card:hover { transform: translateY(-5px); }
    .diagram-card h3 { margin-top: 0; color: #2c3e50; }
    #quiz-page { display: none; }
    .diagram-image {
      max-width: 100%;
      height: auto;
      border: 2px solid #ddd;
      border-radius: 8px;
      margin: 20px 0;
      display: block;
    }
    .diagram-image:hover { cursor: zoom-in; }
    form {
      background: white;
      padding: 25px;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .input-group {
      margin-bottom: 15px;
      display: flex;
      align-items: center;
    }
    .input-group label {
      width: 50px;
      font-weight: bold;
      color: #2c3e50;
    }
    .input-group input {
      flex: 1;
      padding: 10px;
      font-size: 1em;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    .button-group {
      margin-top: 30px;
      text-align: center;
    }
    button {
      padding: 12px 25px;
      font-size: 1.1em;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin: 0 10px;
    }
    button:hover:not(:disabled) { opacity: 0.9; }
    button:disabled { background: #95a5a6; cursor: not-allowed; }
    #submit-btn { background: #27ae60; }
    #prev-btn { background: #95a5a6; display: none; }
    #retry-btn { background: #f39c12; display: none; }
    #next-btn { background: #3498db; display: none; }
    .feedback {
      margin-top: 20px;
      padding: 15px;
      border-radius: 5px;
      background: #ecf0f1;
    }
    .correct { color: #27ae60; font-weight: bold; }
    .incorrect { color: #e74c3c; font-weight: bold; }
    .score {
      font-size: 1.3em;
      font-weight: bold;
      margin: 20px 0;
      text-align: center;
      color: #2c3e50;
    }
  </style>
</head>
<body>
  <header>
    <h1>DFD Labeling Quiz – Expenditure & Revenue Cycles</h1>
  </header>

  <main>
    <div id="home-page">
      <h2>Select a Diagram to Start</h2>
      <div class="diagram-list" id="diagram-list"></div>
    </div>

    <div id="quiz-page">
      <a href="#" id="back-home" class="home-button">← Back to Home</a>
      <h2 id="diagram-title"></h2>
      <img id="diagram-img" class="diagram-image" alt="DFD Diagram"/>
      <form id="answer-form"></form>
      <div id="feedback"></div>
      <div id="score" class="score" style="display:none;"></div>
      <div class="button-group">
        <button id="submit-btn">Submit Answers</button>
        <button id="prev-btn">← Previous Diagram</button>
        <button id="retry-btn">Retry This Diagram</button>
        <button id="next-btn">Next Diagram →</button>
      </div>
    </div>
  </main>

  <script>
    const diagrams = [
      {
        id: 1,
        title: "Expenditure Cycle DFD Level 0",
        image: "diagrams/EXP 1.0 A.png",
        labels: ["A","B","C","D","E","F","G","H","I","J","K","L","a","b","c","d","e","f","g"],
        answers: {
          A: "Copy of purchase order",
          B: "Purchase requisition",
          C: "Ordering",
          D: "Purchase order",
          E: "Inventory",
          F: "Suppliers",
          G: "Suppliers",
          H: "Receiving",
          I: "Approve supplier invoices",
          J: "Cash disbursement",
          K: "Accounts payable",
          L: "General ledger",
          a: "Purchase order",
          b: "Packing slip",
          c: "Goods",
          d: "Receiving report",
          e: "Invoice",
          f: "Voucher package",
          g: "Payments"
        },
        interchangeable: { EF: ["E","F"], bc: ["b","c"] }
      },
      {
        id: 2,
        title: "Expenditure Cycle DFD Level 1: Ordering",
        image: "diagrams/EXP 1.1 A.png",
        labels: ["A","B","C","D","E","a","b"],
        answers: {
          A: "Revenue Cycle",
          B: "Inventory",
          C: "Select supplier",
          D: "Suppliers",
          E: "Purchase Orders",
          a: "Purchase requisition",
          b: "Copy of purchase order"
        }
      },
      {
        id: 3,
        title: "Expenditure Cycle DFD Level 1: Receiving",
        image: "diagrams/EXP 2.1 A.png",
        labels: ["A","B","C","a","b","c","d","e"],
        answers: {
          A: "Supplier",
          B: "Suppliers",
          C: "Revenue cycle",
          a: "Goods",
          b: "Receiving report",
          c: "Goods",
          d: "Receiving report",
          e: "Receiving report"
        },
        interchangeable: { ab: ["a","b"], cd: ["c","d"] }
      },
      {
        id: 4,
        title: "Revenue Cycle DFD Level 0",
        image: "diagrams/REV 1.0 A.png",
        labels: ["A","B","C","D","a","b","c","d","e","f","g","h","i"],
        answers: {
          A: "Sales order entry",
          B: "Shipping",
          C: "Billing",
          D: "Cash collections",
          a: "Sales Order",
          b: "Packing slip",
          c: "Bill of lading",
          d: "Invoice",
          e: "Monthly statements",
          f: "Sales",
          g: "Bill of lading",
          h: "Orders",
          i: "Payments"
        },
        interchangeable: { bc: ["b","c"], de: ["d","e"] }
      },
      {
        id: 5,
        title: "Revenue Cycle DFD Level 1: Sales Order Entry",
        image: "diagrams/REV 1.1 A.png",
        labels: ["A","B","C","a","b","c"],
        answers: {
          A: "Take order",
          B: "Approve credit",
          C: "Inventory",
          a: "Orders",
          b: "Sales order",
          c: "Picking ticket"
        }
      },
      {
        id: 6,
        title: "Revenue Cycle DFD Level 1: Shipping",
        image: "diagrams/REV 2.1 A.png",
        labels: ["A","B","C","D","a","b","c","d","e","f"],
        answers: {
          A: "Pick and Pack",
          B: "Ship goods",
          C: "Sales Order",
          D: "Inventory",
          a: "Picking ticket",
          b: "Picking ticket",
          c: "Goods",
          d: "Sales order",
          e: "Bill of lading",
          f: "Packing slip"
        },
        interchangeable: { ef: ["e","f"] }
      },
      {
        id: 7,
        title: "Revenue Cycle DFD Level 1: Billing",
        image: "diagrams/REV 3.1 A.png",
        labels: ["A","B","C","D","a","b","c"],
        answers: {
          A: "Shipping",
          B: "Customer",
          C: "Update accounts receivable",
          D: "Mailroom",
          a: "Packing Slip",
          b: "Bill of lading",
          c: "Receivable information"
        },
        interchangeable: { ab: ["a","b"] }
      }
    ];

    let currentDiagramIndex = -1;

    const homePage = document.getElementById('home-page');
    const quizPage = document.getElementById('quiz-page');
    const diagramList = document.getElementById('diagram-list');
    const diagramTitle = document.getElementById('diagram-title');
    const diagramImg = document.getElementById('diagram-img');
    const answerForm = document.getElementById('answer-form');
    const feedback = document.getElementById('feedback');
    const scoreDiv = document.getElementById('score');
    const submitBtn = document.getElementById('submit-btn');
    const prevBtn = document.getElementById('prev-btn');
    const retryBtn = document.getElementById('retry-btn');
    const nextBtn = document.getElementById('next-btn');
    const backHome = document.getElementById('back-home');

    function normalize(str) {
      if (!str) return "";
      return str.replace(/\s+/g, "").toLowerCase();
    }

    function loadHome() {
      homePage.style.display = 'block';
      quizPage.style.display = 'none';
      diagramList.innerHTML = '';
      diagrams.forEach((diag, index) => {
        const card = document.createElement('div');
        card.className = 'diagram-card';
        card.innerHTML = `<h3>${index + 1}. ${diag.title}</h3>`;
        card.onclick = () => startQuiz(index);
        diagramList.appendChild(card);
      });
    }

    function startQuiz(index) {
      currentDiagramIndex = index;
      const diag = diagrams[index];

      homePage.style.display = 'none';
      quizPage.style.display = 'block';

      diagramTitle.textContent = `${index + 1}. ${diag.title}`;
      diagramImg.src = diag.image;
      diagramImg.onclick = () => window.open(diag.image, '_blank');

      answerForm.innerHTML = '';
      feedback.innerHTML = '';
      scoreDiv.style.display = 'none';
      submitBtn.style.display = 'inline-block';
      prevBtn.style.display = 'none';
      retryBtn.style.display = 'none';
      nextBtn.style.display = 'none';

      diag.labels.forEach(label => {
        const div = document.createElement('div');
        div.className = 'input-group';
        div.innerHTML = `
          <label>${label}:</label>
          <input type="text" id="${label}" autocomplete="off"/>
        `;
        answerForm.appendChild(div);
      });
    }

    function showNavigationButtons() {
      submitBtn.style.display = 'none';
      retryBtn.style.display = 'inline-block';

      // Previous button
      if (currentDiagramIndex > 0) {
        prevBtn.style.display = 'inline-block';
        prevBtn.onclick = () => startQuiz(currentDiagramIndex - 1);
      } else {
        prevBtn.style.display = 'none';
      }

      // Next / Back to Home button
      if (currentDiagramIndex < diagrams.length - 1) {
        nextBtn.textContent = 'Next Diagram →';
        nextBtn.onclick = () => startQuiz(currentDiagramIndex + 1);
        nextBtn.style.display = 'inline-block';
      } else {
        nextBtn.textContent = 'Back to Home';
        nextBtn.onclick = loadHome;
        nextBtn.style.display = 'inline-block';
      }
    }

    function checkAnswers() {
      const diag = diagrams[currentDiagramIndex];
      let correctCount = 0;
      let total = diag.labels.length;

      feedback.innerHTML = '<h3>Results:</h3>';

      if (diag.interchangeable) {
        for (const key in diag.interchangeable) {
          const [l1, l2] = diag.interchangeable[key];
          const input1 = document.getElementById(l1);
          const input2 = document.getElementById(l2);
          const user1 = normalize(input1.value);
          const user2 = normalize(input2.value);
          const correct1 = normalize(diag.answers[l1]);
          const correct2 = normalize(diag.answers[l2]);

          if (user1 === correct2 && user2 === correct1) {
            input1.value = diag.answers[l2];
            input2.value = diag.answers[l1];
          }
        }
      }

      diag.labels.forEach(label => {
        const input = document.getElementById(label);
        const userAnswer = input.value;
        const correctAnswer = diag.answers[label];

        input.disabled = true;

        const p = document.createElement('p');
        if (normalize(userAnswer) === normalize(correctAnswer)) {
          p.innerHTML = `<strong>${label}:</strong> <span class="correct">Correct!</span> (${correctAnswer})`;
          correctCount++;
        } else {
          p.innerHTML = `<strong>${label}:</strong> <span class="incorrect">Incorrect</span> — Correct: ${correctAnswer}`;
        }
        feedback.appendChild(p);
      });

      scoreDiv.textContent = `You got ${correctCount} out of ${total} correct!`;
      scoreDiv.style.display = 'block';

      showNavigationButtons();
    }

    function retryCurrent() {
      startQuiz(currentDiagramIndex);
    }

    submitBtn.onclick = checkAnswers;
    retryBtn.onclick = retryCurrent;
    backHome.onclick = (e) => {
      e.preventDefault();
      loadHome();
    };

    loadHome();
  </script>
</body>
</html>
