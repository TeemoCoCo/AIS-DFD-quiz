<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Accounting Information Systems – Practice & Past Exams</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f7f9fc; color: #333; line-height: 1.6; }
    header { background: #2c3e50; color: white; padding: 30px; text-align: center; }
    h1 { margin: 0; font-size: 2em; }
    nav { background: #34495e; padding: 15px; text-align: center; }
    nav a { color: white; margin: 0 30px; text-decoration: none; font-weight: bold; font-size: 1.1em; }
    nav a:hover { text-decoration: underline; }
    main { padding: 40px 20px; max-width: 1400px; margin: 0 auto; }
    section { margin-bottom: 120px; }
    h2 { color: #2c3e50; border-bottom: 3px solid #3498db; padding-bottom: 10px; margin-bottom: 40px; }

    .instruction-text {
      font-size: 1.8em;
      color: #2c3e50;
      margin-bottom: 50px;
      font-weight: 600;
      text-align: center;
    }
    .diagram-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 30px; }
    .diagram-card { background: white; padding: 25px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); cursor: pointer; text-align: center; transition: transform 0.2s; }
    .diagram-card:hover { transform: translateY(-5px); }
    .diagram-card h3 { margin: 0; color: #2c3e50; }

    .quiz-container { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; align-items: start; margin-top: 40px; }
    .diagram-section { text-align: center; }
    .diagram-image { max-width: 100%; border: 2px solid #ddd; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
    .diagram-image:hover { cursor: zoom-in; }
    .answers-section { background: white; padding: 30px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); max-height: 80vh; overflow-y: auto; }
    .input-group { margin-bottom: 18px; display: flex; align-items: center; }
    .input-group label { width: 50px; font-weight: bold; color: #2c3e50; font-size: 1.1em; }
    .input-group input { flex: 1; padding: 12px; font-size: 1em; border: 1px solid #ccc; border-radius: 4px; }
    .button-group { margin-top: 30px; text-align: center; }
    button { padding: 12px 25px; font-size: 1.1em; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 8px 10px; }
    button:hover:not(:disabled) { opacity: 0.9; }
    .submit-btn { background: #27ae60; }
    .prev-btn { background: #95a5a6; display: none; }
    .retry-btn { background: #f39c12; display: none; }
    .next-btn { background: #3498db; display: none; }
    .home-btn { background: #34495e; }
    .feedback { margin-top: 40px; padding: 20px; border-radius: 8px; background: #ecf0f1; grid-column: 1 / -1; }
    .score { font-size: 1.4em; font-weight: bold; margin: 30px 0; text-align: center; color: #2c3e50; grid-column: 1 / -1; }

    @media (max-width: 900px) {
      .quiz-container { grid-template-columns: 1fr; }
      .answers-section { max-height: none; }
    }
  </style>
</head>
<body>
  <header>
    <h1>Accounting Information Systems – Practice & Past Exams</h1>
  </header>

  <nav>
    <a href="#dfd-practice">DFD Labeling Practice</a>
    <a href="#past-exams">Past Exam DFD Labeling</a>
  </nav>

  <main>
    <!-- Section 1: DFD Labeling Practice -->
    <section id="dfd-practice">
      <h2>DFD Labeling Practice</h2>

      <div id="practice-intro">
        <h3 class="instruction-text">Select a diagram below to practice labeling.</h3>
        <div class="diagram-list" id="practice-list"></div>
      </div>

      <div id="practice-quiz" style="display: none;">
        <button onclick="backToList('practice')" style="background:#3498db;padding:10px 20px;border:none;border-radius:5px;color:white;cursor:pointer;margin-bottom:20px;">← Back to List</button>
        <h2 id="practice-title"></h2>

        <div class="quiz-container">
          <div class="diagram-section">
            <img id="practice-img" class="diagram-image" alt="Practice Diagram"/>
          </div>
          <div class="answers-section">
            <form id="practice-form"></form>
            <div class="button-group">
              <button class="submit-btn" id="practice-submit">Submit Answers</button>
              <button class="prev-btn" id="practice-prev">← Previous</button>
              <button class="retry-btn" id="practice-retry">Retry</button>
              <button class="next-btn" id="practice-next">Next →</button>
              <button class="home-btn" onclick="backToList('practice')">Back to List</button>
            </div>
          </div>
        </div>

        <div id="practice-feedback"></div>
        <div id="practice-score" class="score" style="display:none;"></div>
      </div>
    </section>

    <!-- Section 2: Past Exam DFD Labeling -->
    <section id="past-exams">
      <h2>Past Exam DFD Labeling</h2>

      <div id="past-intro">
        <h3 class="instruction-text">Select a past exam diagram to practice labeling.</h3>
        <div class="diagram-list" id="past-list"></div>
      </div>

      <div id="past-quiz" style="display: none;">
        <button onclick="backToList('past')" style="background:#3498db;padding:10px 20px;border:none;border-radius:5px;color:white;cursor:pointer;margin-bottom:20px;">← Back to List</button>
        <h2 id="past-title"></h2>

        <div class="quiz-container">
          <div class="diagram-section">
            <img id="past-img" class="diagram-image" alt="Past Exam Diagram"/>
          </div>
          <div class="answers-section">
            <form id="past-form"></form>
            <div class="button-group">
              <button class="submit-btn" id="past-submit">Submit Answers</button>
              <button class="prev-btn" id="past-prev">← Previous</button>
              <button class="retry-btn" id="past-retry">Retry</button>
              <button class="next-btn" id="past-next">Next →</button>
              <button class="home-btn" onclick="backToList('past')">Back to List</button>
            </div>
          </div>
        </div>

        <div id="past-feedback"></div>
        <div id="past-score" class="score" style="display:none;"></div>
      </div>
    </section>
  </main>

  <script>
    // Practice Diagrams (from diagrams/practice/)
    const practiceDiagrams = [
      {
        id: 1,
        title: "Expenditure Cycle DFD Level 0",
        image: "diagrams/practice/EXP 1.0 A.png",
        labels: ["A","B","C","D","E","F","G","H","I","J","K","L","a","b","c","d","e","f","g"],
        answers: {
          A: "Copy of purchase order",
          B: "Purchase requisition",
          C: "Ordering",
          D: "Purchase order",
          E: "Inventory",
          F: "Suppliers",
          G: "Suppliers",
          H: "Receiving",
          I: "Approve supplier invoices",
          J: "Cash disbursement",
          K: "Accounts payable",
          L: "General ledger",
          a: "Purchase order",
          b: "Packing slip",
          c: "Goods",
          d: "Receiving report",
          e: "Invoice",
          f: "Voucher package",
          g: "Payments"
        },
        interchangeable: [["E","F"], ["b","c"]]
      },
      {
        id: 2,
        title: "Expenditure Cycle DFD Level 1: Ordering",
        image: "diagrams/practice/EXP 1.1 A.png",
        labels: ["A","B","C","D","E","a","b"],
        answers: {
          A: "Revenue Cycle",
          B: "Inventory",
          C: "Select supplier",
          D: "Suppliers",
          E: "Purchase Orders",
          a: "Purchase requisition",
          b: "Copy of purchase order"
        },
        interchangeable: []
      },
      {
        id: 3,
        title: "Expenditure Cycle DFD Level 1: Receiving",
        image: "diagrams/practice/EXP 2.1 A.png",
        labels: ["A","B","C","a","b","c","d","e"],
        answers: {
          A: "Supplier",
          B: "Suppliers",
          C: "Revenue cycle",
          a: "Goods",
          b: "Receiving report",
          c: "Goods",
          d: "Receiving report",
          e: "Receiving report"
        },
        interchangeable: [["a","b"], ["c","d"]]
      },
      {
        id: 4,
        title: "Expenditure Cycle DFD Level 1: Cash Disbursement",
        image: "diagrams/practice/EXP 4.1 A.png",
        labels: ["A","B","C","D","E","a","b","c"],
        answers: {
          A: "Prepare cheque",
          B: "Approve and sign cheque",
          C: "Mail cheque",
          D: "General ledger",
          E: "Supplier",
          a: "Voucher package",
          b: "Cheques",
          c: ["Payments", "Signed Cheques"]
        },
        interchangeable: []
      },
      {
        id: 5,
        title: "Revenue Cycle DFD Level 0",
        image: "diagrams/practice/REV 1.0 A.png",
        labels: ["A","B","C","D","a","b","c","d","e","f","g","h","i"],
        answers: {
          A: "Sales order entry",
          B: "Shipping",
          C: "Billing",
          D: "Cash collections",
          a: "Sales Order",
          b: "Packing slip",
          c: "Bill of lading",
          d: "Invoice",
          e: "Monthly statements",
          f: "Sales",
          g: "Bill of lading",
          h: "Orders",
          i: "Payments"
        },
        interchangeable: [["b","c"], ["d","e"]]
      },
      {
        id: 6,
        title: "Revenue Cycle DFD Level 1: Sales Order Entry",
        image: "diagrams/practice/REV 1.1 A.png",
        labels: ["A","B","C","a","b","c"],
        answers: {
          A: "Take order",
          B: "Approve credit",
          C: "Inventory",
          a: "Orders",
          b: "Sales order",
          c: "Picking ticket"
        },
        interchangeable: []
      },
      {
        id: 7,
        title: "Revenue Cycle DFD Level 1: Shipping",
        image: "diagrams/practice/REV 2.1 A.png",
        labels: ["A","B","C","D","a","b","c","d","e","f"],
        answers: {
          A: "Pick and Pack",
          B: "Ship goods",
          C: "Sales Order",
          D: "Inventory",
          a: "Picking ticket",
          b: "Picking ticket",
          c: "Goods",
          d: "Sales order",
          e: "Bill of lading",
          f: "Packing slip"
        },
        interchangeable: [["e","f"]]
      },
      {
        id: 8,
        title: "Revenue Cycle DFD Level 1: Billing",
        image: "diagrams/practice/REV 3.1 A.png",
        labels: ["A","B","C","D","a","b","c"],
        answers: {
          A: "Shipping",
          B: "Customer",
          C: "Update accounts receivable",
          D: "Mailroom",
          a: "Packing Slip",
          b: "Bill of lading",
          c: "Receivable information"
        },
        interchangeable: [["a","b"]]
      }
    ];

    // Past Exam Diagrams (from diagrams/past paper/)
        const pastDiagrams = [
      {
        id: 1,
        title: "2015-16 (SEM2) Q1d - Exp. Cycle Level 1: Ordering & Receiving",
        image: "diagrams/past paper/1516SEM2_Q1d.png",
        labels: ["P1","P2","F1","F2","F3","F4","D1","D2","S1","S2"],
        answers: {
          P1: "Select Supplier",
          P2: "Receive Goods",
          F1: "Purchase Requisition",
          F2: "Purchase Order",
          F3: "Goods",
          F4: "Receiving Report",
          D1: "Revenue Cycle",
          D2: "Supplier",
          S1: "Inventory",
          S2: "Supplier"
        },
        interchangeable: []
      },
      {
        id: 2,
        title: "2018-19 (SEM1) Q2a - Rev. Cycle Level 1: Billing",
        image: "diagrams/past paper/1819SEM1_Q2a.png",
        labels: ["R_P1","R_F1","R_F2","R_F3","R_D1","R_D2","R_S1"],
        answers: {
          R_P1: ["Maintain account receivable", "Update account receivable"],
          R_F1: "Packing slip",
          R_F2: "Bill of lading",
          R_F3: "Receivable Information",
          R_D1: "Shipping",
          R_D2: ["Bank","Mailroom"],
          R_S1: ["Customer", "Accounts receivable"]
        },
        interchangeable: [["R_F1","R_F2"]]
      },
      {
        id: 3,
        title: "2022-23 (SEM1) Q1a - Rev. Cycle Level 1: Shipping",
        image: "diagrams/past paper/2223SEM1_Q1a.png",
        labels: ["R_P1","R_P2","R_F1","R_F2","R_F3","R_D1","R_D2","R_S1"],
        answers: {
          R_P1: "Pick and Pack",
          R_P2: "Ship goods",
          R_F1: "Picking ticket",
          R_F2: "Packing Slip",
          R_F3: "Back Orders",
          R_D1: "Sales order entry",
          R_D2: ["Billing and Account Receivable","Billing and Accounts Receivable"],
          R_S1: "Inventory"
        },
        interchangeable: []
      },
      {
        id: 4,
        title: "2022-23 (SEM1) Q2a - Exp. Cycle Level 1: Receiving",
        image: "diagrams/past paper/2223SEM1_Q2a.png",
        labels: ["E_P1","E_P2","E_F1","E_F2","E_D1","E_D2","E_S1","E_S2"],
        answers: {
          E_P1: "Receive goods",
          E_P2: ["Transfer goods to inventory stores or various departments", "Transfer goods to inventory store or various department"],
          E_F1: "Packing slip",
          E_F2: "Receiving Report",
          E_D1: "Supplier",
          E_D2: ["Account Payable", "Accounts Payable"],
          E_S1: "Purchase Order",
          E_S2: "Inventory"
        },
        interchangeable: []
      },
      {
        id: 5,
        title: "2022-23 (SEM2) Q1a - Rev. Cycle Level 0",
        image: "diagrams/past paper/2223SEM2_Q1a.png",
        labels: ["A1","A2","A3","B1","B2","B3","B4","B5","C1","C2"],
        answers: {
          A1: "Sales Order Entry",
          A2: "Shipping",
          A3: "Cash Collection",
          B1: "Sales Order",
          B2: "Bill of Lading",
          B3: "Packing Slip",
          B4: ["Sales Invoice", "Invoice"],
          B5: "Payments",
          C1: "Inventory",
          C2: "Customer"
        },
        interchangeable: [["C1","C2"]]
      },
      {
        id: 6,
        title: "2022-23 (SEM2) Q2a - Exp. Cycle Level 0",
        image: "diagrams/past paper/2223SEM2_Q2a.png",
        labels: ["P1","P2","P3","Q1","Q2","Q3","Q4","R1","R2","S1"],
        answers: {
          P1: "Ordering",
          P2: "Receiving",
          P3: "Cash Disbursement",
          Q1: "Purchase Order",
          Q2: "Receiving Report",
          Q3: "Voucher Package",
          Q4: "Payments",
          R1: "Accounts Payable",
          R2: "General Ledger",
          S1: "Suppliers"
        },
        interchangeable: [["R1","R2"]]
      },
      {
        id: 7,
        title: "2024-25 (SEM1) Q2a - Exp. Cycle Level 1: Cash Disbursement",
        image: "diagrams/past paper/2425SEM1_Q2a.png",
        labels: ["P1","P2","P3","F1","F2","F3","D1","S1"],
        answers: {
          P1: "Prepare cheque",
          P2: "Approve and sign cheque",
          P3: "Mail cheque",
          F1: "Voucher Package",
          F2: "Cheques",
          F3: ["Payments", "Signed Cheques"],
          D1: "Supplier",
          S1: "General ledger"
        },
        interchangeable: []
      }
    ];

let currentPracticeIndex = -1;
    let currentPastIndex = -1;

    function normalize(str) {
      if (!str) return "";
      return str.replace(/\s+/g, "").toLowerCase().replace(/s$/, "");
    }

    // Practice Section
    function loadPracticeList() {
      const list = document.getElementById('practice-list');
      list.innerHTML = '';
      practiceDiagrams.forEach((diag, i) => {
        const card = document.createElement('div');
        card.className = 'diagram-card';
        card.innerHTML = `<h3>${i + 1}. ${diag.title}</h3>`;
        card.onclick = () => startPracticeQuiz(i);
        list.appendChild(card);
      });
    }

    function startPracticeQuiz(index) {
      currentPracticeIndex = index;
      const diag = practiceDiagrams[index];

      document.getElementById('practice-intro').style.display = 'none';
      document.getElementById('past-exams').style.display = 'none';
      document.getElementById('practice-quiz').style.display = 'block';

      document.getElementById('practice-title').textContent = `${index + 1}. ${diag.title}`;
      document.getElementById('practice-img').src = diag.image;
      document.getElementById('practice-img').onclick = () => window.open(diag.image, '_blank');

      setupQuizForm('practice', diag);
    }

    // Past Exam Section
    function loadPastList() {
      const list = document.getElementById('past-list');
      list.innerHTML = '';
      if (pastDiagrams.length === 0) {
        list.innerHTML = '<p style="text-align:center;color:#666;font-size:1.2em;">No past exam diagrams added yet.</p>';
        return;
      }
      pastDiagrams.forEach((diag, i) => {
        const card = document.createElement('div');
        card.className = 'diagram-card';
        card.innerHTML = `<h3>${i + 1}. ${diag.title}</h3>`;
        card.onclick = () => startPastQuiz(i);
        list.appendChild(card);
      });
    }

    function startPastQuiz(index) {
      currentPastIndex = index;
      const diag = pastDiagrams[index];

      document.getElementById('past-intro').style.display = 'none';
      document.getElementById('dfd-practice').style.display = 'none';
      document.getElementById('past-quiz').style.display = 'block';

      document.getElementById('past-title').textContent = `${index + 1}. ${diag.title}`;
      document.getElementById('past-img').src = diag.image;
      document.getElementById('past-img').onclick = () => window.open(diag.image, '_blank');

      setupQuizForm('past', diag);
    }

    // Common quiz setup
    function setupQuizForm(type, diag) {
      const form = document.getElementById(`${type}-form`);
      const feedback = document.getElementById(`${type}-feedback`);
      const score = document.getElementById(`${type}-score`);
      const submit = document.getElementById(`${type}-submit`);
      const prev = document.getElementById(`${type}-prev`);
      const retry = document.getElementById(`${type}-retry`);
      const next = document.getElementById(`${type}-next`);

      form.innerHTML = '';
      feedback.innerHTML = '';
      score.style.display = 'none';

      submit.style.display = 'inline-block';
      prev.style.display = 'none';
      retry.style.display = 'none';
      next.style.display = 'none';

      diag.labels.forEach(label => {
        const div = document.createElement('div');
        div.className = 'input-group';
        div.innerHTML = `<label>${label}:</label><input type="text" id="${type}-${label}" autocomplete="off"/>`;
        form.appendChild(div);
      });

      submit.onclick = () => checkQuizAnswers(type, diag);
    }

    function checkQuizAnswers(type, diag) {
      let correctCount = 0;
      const index = type === 'practice' ? currentPracticeIndex : currentPastIndex;
      const diagramsArray = type === 'practice' ? practiceDiagrams : pastDiagrams;

      const userNorm = {};
      diag.labels.forEach(label => {
        const input = document.getElementById(`${type}-${label}`);
        userNorm[label] = normalize(input.value);
        input.disabled = true;
      });

      const feedback = document.getElementById(`${type}-feedback`);
      feedback.innerHTML = '<h3>Results:</h3>';

      diag.labels.forEach(label => {
        // Get all possible correct answers (array or single)
        const correctOptions = Array.isArray(diag.answers[label]) ? diag.answers[label] : [diag.answers[label]];
        const correctNormOptions = correctOptions.map(opt => normalize(opt));

        let isCorrect = correctNormOptions.includes(userNorm[label]);

        // Handle interchangeable
        if (!isCorrect && diag.interchangeable) {
          for (const pair of diag.interchangeable) {
            if (pair.includes(label)) {
              const other = pair.find(l => l !== label);
              const otherOptions = Array.isArray(diag.answers[other]) ? diag.answers[other] : [diag.answers[other]];
              const otherNormOptions = otherOptions.map(opt => normalize(opt));

              // Check if swapped correctly (any combination)
              if (correctNormOptions.includes(userNorm[other]) && otherNormOptions.includes(userNorm[label])) {
                isCorrect = true;
                break;
              }
            }
          }
        }

        const p = document.createElement('p');
        const displayAnswer = Array.isArray(diag.answers[label]) ? diag.answers[label].join(" or ") : diag.answers[label];
        if (isCorrect) {
          p.innerHTML = `<strong>${label}:</strong> <span style="color:#27ae60;font-weight:bold">Correct!</span> (${displayAnswer})`;
          correctCount++;
        } else {
          p.innerHTML = `<strong>${label}:</strong> <span style="color:#e74c3c;font-weight:bold">Incorrect</span> — Correct: ${displayAnswer}`;
        }
        feedback.appendChild(p);
      });

      document.getElementById(`${type}-score`).textContent = `You got ${correctCount} out of ${diag.labels.length} correct!`;
      document.getElementById(`${type}-score`).style.display = 'block';

      // Navigation
      document.getElementById(`${type}-submit`).style.display = 'none';
      document.getElementById(`${type}-retry`).style.display = 'inline-block';
      document.getElementById(`${type}-retry`).onclick = () => type === 'practice' ? startPracticeQuiz(index) : startPastQuiz(index);

      if (index > 0) {
        document.getElementById(`${type}-prev`).style.display = 'inline-block';
        document.getElementById(`${type}-prev`).onclick = () => type === 'practice' ? startPracticeQuiz(index - 1) : startPastQuiz(index - 1);
      }

      if (index < diagramsArray.length - 1) {
        document.getElementById(`${type}-next`).textContent = 'Next Diagram →';
        document.getElementById(`${type}-next`).onclick = () => type === 'practice' ? startPracticeQuiz(index + 1) : startPastQuiz(index + 1);
        document.getElementById(`${type}-next`).style.display = 'inline-block';
      } else {
        document.getElementById(`${type}-next`).textContent = 'Finish & Back to Menu';
        document.getElementById(`${type}-next`).onclick = () => backToList(type);
        document.getElementById(`${type}-next`).style.display = 'inline-block';
      }
    }

    function backToList(type) {
      if (type === 'practice') {
        document.getElementById('practice-quiz').style.display = 'none';
        document.getElementById('practice-intro').style.display = 'block';
        document.getElementById('past-exams').style.display = 'block';
      } else {
        document.getElementById('past-quiz').style.display = 'none';
        document.getElementById('past-intro').style.display = 'block';
        document.getElementById('dfd-practice').style.display = 'block';
      }
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Navigation menu
    document.querySelector('nav a[href="#dfd-practice"]').addEventListener('click', (e) => {
      e.preventDefault();
      document.getElementById('past-exams').style.display = 'none';
      document.getElementById('dfd-practice').style.display = 'block';
      document.getElementById('practice-intro').style.display = 'block';
      document.getElementById('practice-quiz').style.display = 'none';
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    document.querySelector('nav a[href="#past-exams"]').addEventListener('click', (e) => {
      e.preventDefault();
      document.getElementById('dfd-practice').style.display = 'none';
      document.getElementById('past-exams').style.display = 'block';
      document.getElementById('past-intro').style.display = 'block';
      document.getElementById('past-quiz').style.display = 'none';
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    loadPracticeList();
    loadPastList();
  </script>
</body>
</html>
